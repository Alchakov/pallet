# Реализация страницы производителей

## Что было сделано:

### 1. Custom Post Type и таксономии
- ✅ Создан `inc/post_type/PLT_Brand.php` - Custom Post Type для производителей
- ✅ Создана таксономия `brand_category` - категории производителей
- ✅ Создана таксономия `region` - регионы
- ✅ Создана таксономия `product_brand` - связь продуктов с производителями

### 2. Кастомные поля (Carbon Fields)
Добавлены поля в `inc/custom-fields/post-meta.php`:
- **Контакты**: телефон, email, сайт, адрес, город, график работы, стаж, форма оплаты
- **Карта**: адрес для карты, координаты (широта, долгота)
- **Фильтры**: минимальная поставка, кастомизация (цвет, размер, логотип, упаковка), наличие прайса
- **Рейтинг и отзывы**: рейтинг, количество отзывов
- **Галерея**: фотогалерея производителя
- **Сертификаты**: галерея сертификатов

### 3. Шаблоны страниц
- ✅ `templates/brand/archive-brand.php` - архив производителей с фильтрами
- ✅ `templates/brand/single-brand.php` - страница отдельного производителя
- ✅ `parts/loops/loop-brand.php` - карточка производителя

### 4. JavaScript
- ✅ `assets/js/source/brands-map.js` - карта брендов (Yandex Maps)
- ✅ `assets/js/source/brands-filter.js` - AJAX фильтрация брендов
- ✅ `assets/js/source/brand-tabs.js` - переключение табов на странице бренда

### 5. REST API endpoints
Добавлены в `inc/classes/PLT_REST_API.php`:
- `/wp-json/pallet/v1/brands-map` - получение данных брендов для карты (с фильтрами)
- `/wp-json/pallet/v1/brand-map/{id}` - получение данных одного бренда для карты
- `/wp-json/pallet/v1/brands-filter` - AJAX фильтрация брендов

### 6. Маршрутизация
- ✅ Обновлен `inc/classes/PLT_Routes.php` для обработки архивов и таксономий брендов

## Что нужно сделать дополнительно:

### 1. Компиляция JavaScript
Нужно скомпилировать JS файлы через gulp:
```bash
# В папке assets/
gulp scripts
```
Или добавить вручную минифицированные версии:
- `assets/js/brands-map.min.js`
- `assets/js/brands-filter.min.js`
- `assets/js/brand-tabs.min.js`

### 2. Стили CSS
Нужно добавить стили для:
- `.brands-archive` - архив производителей
- `.brand-card` - карточка производителя
- `.brand-single` - страница производителя
- `.brand-tabs` - табы на странице производителя
- `.brand-baloon` - балун на карте
- Фильтры и другие элементы

### 3. Иконки для карты
Создать/добавить иконки для меток на карте:
- `/wp-content/themes/pallet/assets/images/pin-brand.png`
- `/wp-content/themes/pallet/assets/images/pin-brand-active.png`

### 4. Геокодирование адресов
Добавить автоматическое определение координат из адреса через Yandex Geocoder API (опционально).

### 5. Формы
Добавить формы:
- "Отправить заявку" на странице производителя
- "Написать производителю"
- Форма добавления отзыва

### 6. Связь продуктов с брендами
При создании/редактировании продукта нужно добавить возможность выбора производителя через таксономию `product_brand`.

## Структура URL:
- Архив производителей: `/proizvoditeli/`
- Категория производителей: `/kategorii-proizvoditeley/{slug}/`
- Регион: `/regiony/{slug}/`
- Страница производителя: `/proizvoditeli/{slug}/`

## Использование:

1. **Добавление производителя:**
   - Перейти в админку → Производители → Добавить
   - Заполнить все поля
   - Выбрать категории и регион
   - Указать координаты для карты (или адрес для автозаполнения)

2. **Фильтрация:**
   - На странице архива использовать фильтры слева
   - При изменении фильтров карта и список обновляются автоматически

3. **Карта:**
   - Нажать "Показать на карте" для отображения всех производителей
   - При фильтрации карта показывает только отфильтрованные бренды
