"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var $=jQuery.noConflict();!function(){var o=$(window),t=new function t(){var n=this;_classCallCheck(this,t),this.init=function(){n.gallery(),n.buyAction(),n.quantity()},this.quantity=function(){$(document.body).on("change keyup",".product-qty input",function(t){var n=$(this),o=n.val(),a=n.data("price"),s=n.data("retail")||a,i=n.data("limit")||o+1,l=0;o<1&&(o=0),l=o<i?s*o:a*o,$(".buy-card__total").text(l.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")),$('form[name="form-modal-buy"]').find('input[name="product_total"]').val(l)})},this.gallery=function(){var t=o.width()<768;$(".single-product__gallery-main-track").slick({slidesToShow:1,slidesToScroll:1,infinite:!0,fade:!0,arrows:t,asNavFor:".single-product__gallery-thumb-track",prevArrow:'<button type="button" class="slick-prev"><span class="icon-arrow-left"></span></button>',nextArrow:'<button type="button" class="slick-next"><span class="icon-arrow-right"></span></button>'}),$(".single-product__gallery-thumb-track").slick({slidesToShow:3,slidesToScroll:1,infinite:!0,asNavFor:".single-product__gallery-main-track",prevArrow:'<button type="button" class="slick-prev"><span class="icon-arrow-left"></span></button>',nextArrow:'<button type="button" class="slick-next"><span class="icon-arrow-right"></span></button>',focusOnSelect:!0,responsive:[{breakpoint:1200,settings:{slidesToShow:3}},{breakpoint:992,settings:{slidesToShow:2}}]}),$(".single-product__gallery").css("opacity",1),$(".single-product__upsells-slider").slick({slidesToShow:3,slidesToScroll:1,infinite:!0,appendArrows:$(".single-product__upsells-arrow"),prevArrow:'<button type="button" class="slick-prev"><span class="icon-arrow-left"></span></button>',nextArrow:'<button type="button" class="slick-next"><span class="icon-arrow-right"></span></button>',responsive:[{breakpoint:768,settings:{slidesToShow:2}}]})},this.buyAction=function(t,n){var a=null;$("a.buy-action").click(function(t){t.preventDefault(),null!==a&&a.abort();var n=$(this),o={action:"buy_action",product:n.data("product")};a=$.post({url:"/wp-admin/admin-ajax.php",data:o,cache:!1,beforeSend:function(){n.block({message:null,overlayCSS:{backgroundColor:"#fff",opacity:.5}})}}).done(function(t){if(!0===t.success){var n=$('form[name="form-modal-buy"]');n.find("#form-buy__card").html(t.data.card),n.find(".product-qty input").styler(),$(".modal").modal("hide"),$("#modal-buy").modal("show"),$("#modal-buy").on("hidden.bs.modal",function(t){n.find("#form-buy__card").html("")})}else alert(t.data)}).fail(function(t,n,o){alert("Ошибка")}).always(function(t){n.unblock(),a=null})})}};o.on("DOMContentLoaded",function(){return t.init()})}();